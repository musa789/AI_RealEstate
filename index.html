<!DOCTYPE html>
<html>
<head>
	<title>Predicted Location</title>
	<script src="https://api.mapbox.com/mapbox-gl-js/v2.4.0/mapbox-gl.js"></script>
	<link href="https://api.mapbox.com/mapbox-gl-js/v2.4.0/mapbox-gl.css" rel="stylesheet" />
	<style>
		#map {
			height: 500px;
			width: 100%;
		}
	</style>
</head>
<body>
	<h1>Predicted Location</h1>
	<form method="POST" action="/">
		<label for="budget">Budget (in PKR):</label>
		<input type="number" id="budget" name="budget" required><br><br>
		<label for="city">City:</label>
		<select id="city" name="city" required>
			<option value="Karachi">Karachi</option>
			<option value="Lahore">Lahore</option>
			<option value="Islamabad">Islamabad</option>
		</select><br><br>
		<label for="property_type">Property Type:</label>
		<select id="property_type" name="property_type" required>
			<option value="Flat">Flat</option>
			<option value="House">House</option>
			<option value="Penthouse">Penthouse</option>
			<option value="Farm House">Farm House</option>
			<option value="Lower Portion">Lower Portion</option>
			<option value="Upper Portion">Upper Portion</option>
			<option value="Room">Room</option>
		</select><br><br>
		<label for="period">Period (in months):</label>
		<input type="number" id="period" name="period" required><br><br>
		<input type="submit" value="Submit">
	</form>
	{% if predicted_price %}
		<p>The predicted price for a {{ property_type.lower() }} in {{ city }} with a period of {{ period }} months is approximately {{ predicted_price }} PKR.</p>
		{% if map_url %}
			<div id='map'></div>
			<script>
				mapboxgl.accessToken = 'sk.eyJ1IjoibXVzYTc4OSIsImEiOiJjbGY1ZDBzbzgwdHF5M3dvY3F4dGx4a210In0.l-i8jiaS8LWPyXj1ocQiCg';
				var map = new mapboxgl.Map({
					container: 'map',
					style: 'mapbox://styles/mapbox/streets-v11',
					center: [{{ longitude }}, {{ latitude }}],
					zoom: 12
				});
			</script>
		{% endif %}
	{% endif %}
	{% if error %}
		<p>{{ error }}</p>
	{% endif %}
	{{ script }}
</body>
</html>
